file(GLOB VSTD_SRC *.h vstd/*)

if (${PYTHONLIBS_FOUND})
    file(REMOVE ${CMAKE_CURRENT_SOURCE_DIR}/tmp/converter_org.h)
    file(REMOVE ${CMAKE_CURRENT_SOURCE_DIR}/tmp/converter.h)
    file(REMOVE ${CMAKE_CURRENT_SOURCE_DIR}/vstd/converter.h)
    file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/vstd/converter_org.h DESTINATION ${CMAKE_CURRENT_SOURCE_DIR}/tmp)
    file(RENAME ${CMAKE_CURRENT_SOURCE_DIR}/tmp/converter_org.h ${CMAKE_CURRENT_SOURCE_DIR}/vstd/converter.h)
    file(REMOVE_RECURSE {CMAKE_CURRENT_SOURCE_DIR}/tmp)
else ()
    file(REMOVE ${CMAKE_CURRENT_SOURCE_DIR}/tmp/converter_mock.h)
    file(REMOVE ${CMAKE_CURRENT_SOURCE_DIR}/tmp/converter.h)
    file(REMOVE ${CMAKE_CURRENT_SOURCE_DIR}/vstd/converter.h)
    file(COPY ${CMAKE_CURRENT_SOURCE_DIR}/vstd/converter_mock.h DESTINATION ${CMAKE_CURRENT_SOURCE_DIR}/tmp)
    file(RENAME ${CMAKE_CURRENT_SOURCE_DIR}/tmp/converter_mock.h ${CMAKE_CURRENT_SOURCE_DIR}/vstd/converter.h)
    file(REMOVE_RECURSE {CMAKE_CURRENT_SOURCE_DIR}/tmp)
endif ()

add_custom_target(vstd SOURCES ${VSTD_SRC})